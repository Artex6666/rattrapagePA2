<div class="container-fluid p-0">
  <!-- HERO / CONCEPT avec fond d√©grad√©, animation, ellipses SVG anim√©es -->
  <section class="hero-section text-center text-white py-5 position-relative animate-fadein w-100" style="background: linear-gradient(120deg, #27ae60 0%, #2980b9 100%); overflow: hidden; margin: 0; padding-top: 60px; min-height: calc(100vh - 64px); display: flex; flex-direction: column; justify-content: center;">
    <!-- Ellipses SVG anim√©es, bien visibles -->
    <svg class="hero-ellipses" width="100%" height="100%" viewBox="0 0 1440 400" style="position:absolute;top:0;left:0;z-index:0;pointer-events:none;">
      <ellipse class="ellipse-move ellipse1" cx="350" cy="110" rx="220" ry="80" fill="#fff" fill-opacity="0.18"/>
      <ellipse class="ellipse-move ellipse2" cx="1150" cy="90" rx="180" ry="60" fill="#f0abfc" fill-opacity="0.22"/>
      <ellipse class="ellipse-move ellipse3" cx="700" cy="320" rx="260" ry="100" fill="#60a5fa" fill-opacity="0.15"/>
      <ellipse class="ellipse-move ellipse4" cx="1200" cy="340" rx="160" ry="60" fill="#fff" fill-opacity="0.13"/>
    </svg>
    <h1 class="display-3 fw-bold mb-3 animate-slidein" style="position:relative;z-index:2;">Driv'n Cook</h1>
    <p class="lead fs-4 animate-fadein-delay" style="position:relative;z-index:2;">Food trucks de qualit√©, frais et locaux</p>
    <div class="mt-4 animate-fadein-delay2" style="position:relative;z-index:2;">
      <a href="/register" class="btn btn-lg btn-light shadow" id="mainActionBtn">Cr√©er un compte</a>
    </div>
    <!-- Vague plus haute et √©paisse -->
    <svg viewBox="0 0 1440 400" style="position:absolute; left:0; right:0; bottom:0; width:100%; height:200px; display:block; pointer-events:none;z-index:1;" preserveAspectRatio="none">
      <path fill="#fff" fill-opacity="0.35" d="M0,250 Q360,400 720,250 T1440,250 V400H0Z" />
    </svg>
  </section>

  <div class="container mt-5">
    <!-- Pr√©sentation du concept -->
    <section class="concept-section py-5 animate-fadein">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-md-6 mb-4 mb-md-0 animate-slidein">
            <img src="/images/crowdshipping.png" alt="Foodtruck" class="img-fluid rounded shadow-lg" style="max-width: 100%; background: #f8f8f8;" />
          </div>
          <div class="col-md-6 animate-fadein-delay">
            <h2 class="fw-bold mb-3">Qu'est-ce que Driv'n Cook ?</h2>
            <p class="fs-5">Driv'n Cook est un r√©seau de <b>food trucks</b> en franchise, proposant des plats √† base de produits frais et locaux, avec une gestion centralis√©e des entrep√¥ts et un suivi des performances franchis√©s.<br><br>
            <b>Objectifs :</b> qualit√©, rapidit√©, et exp√©rience client optimale.<br><br>
            <span class="text-success">‚úîÔ∏è</span> Ingr√©dients frais et locaux<br>
            <span class="text-success">‚úîÔ∏è</span> 4 entrep√¥ts en √éle-de-France<br>
            <span class="text-success">‚úîÔ∏è</span> Fid√©lit√© et commandes en ligne
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Services principaux -->
    <section class="services-section py-5 animate-fadein-delay2" style="background: #f8f8f8;">
      <div class="container-fluid">
        <h2 class="text-center fw-bold mb-5">Nos services</h2>
        <div class="row g-4">
          <div class="col-md-4 animate-slidein">
            <div class="card h-100 shadow service-card border-0">
              <div class="card-body text-center">
                <i class="bi bi-basket2 display-4 text-success mb-3"></i>
                <h5 class="card-title">Commandes</h5>
                <p class="card-text">Commandez vos menus et retirez-les au food truck choisi.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4 animate-slidein-delay">
            <div class="card h-100 shadow service-card border-0">
              <div class="card-body text-center">
                <i class="bi bi-geo-alt display-4 text-primary mb-3"></i>
                <h5 class="card-title">Carte</h5>
                <p class="card-text">Visualisez les food trucks actifs et nos entrep√¥ts.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4 animate-slidein-delay2">
            <div class="card h-100 shadow service-card border-0">
              <div class="card-body text-center">
                <i class="bi bi-people-fill display-4 text-warning mb-3"></i>
                <h5 class="card-title">Fid√©lit√©</h5>
                <p class="card-text">Cumulez des points et d√©bloquez des menus offerts.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pourquoi Driv'n Cook ? -->
    <section class="py-5 animate-fadein">
      <div class="container-fluid">
        <h2 class="text-center fw-bold mb-4">Pourquoi choisir Driv'n Cook ?</h2>
        <div class="row g-4 justify-content-center">
          <div class="col-md-3 animate-slidein">
            <div class="advantage-box text-center p-4 rounded shadow-sm bg-white">
              <i class="bi bi-leaf display-5 text-success mb-2"></i>
              <h6 class="fw-bold">√âcologique</h6>
              <p class="mb-0">R√©duction de l'empreinte carbone gr√¢ce √† l'optimisation des trajets et √† la mutualisation des livraisons.</p>
            </div>
          </div>
          <div class="col-md-3 animate-slidein-delay">
            <div class="advantage-box text-center p-4 rounded shadow-sm bg-white">
              <i class="bi bi-currency-euro display-5 text-primary mb-2"></i>
              <h6 class="fw-bold">√âconomique</h6>
              <p class="mb-0">Favorise le pouvoir d'achat, permet de rentabiliser ses trajets et de faire des √©conomies sur les livraisons.</p>
            </div>
          </div>
          <div class="col-md-3 animate-slidein-delay2">
            <div class="advantage-box text-center p-4 rounded shadow-sm bg-white">
              <i class="bi bi-people display-5 text-warning mb-2"></i>
              <h6 class="fw-bold">Solidaire</h6>
              <p class="mb-0">Lutte contre l'isolement, favorise l'entraide et la cr√©ation de liens entre particuliers et commer√ßants.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section Annonces supprim√©e -->


    <section class="mb-5 animate-fadein">
      <h2 class="mb-3">üó£Ô∏è Avis v√©rifi√©s</h2>
      <div id="customAvisSlider" class="custom-slider">
        <button class="slider-arrow left" id="avisPrevBtn"><i class="bi bi-chevron-left"></i></button>
        <div class="slider-track" id="avisTrack"></div>
        <button class="slider-arrow right" id="avisNextBtn"><i class="bi bi-chevron-right"></i></button>
      </div>
    </section>
    <script>
    document.addEventListener('DOMContentLoaded', async ()=>{
      try {
        const res = await fetch('https://api.axia.quest/api/reviews/public');
        let reviews = await res.json();
        if (!Array.isArray(reviews) || reviews.length===0) {
          reviews = [
            { first_name: 'Client', last_name: 'A', comment: 'Super exp√©rience, menus d√©licieux.', rating: 5 },
            { first_name: 'Client', last_name: 'B', comment: 'Rapide et bon.', rating: 4 },
            { first_name: 'Client', last_name: 'C', comment: 'Food truck pratique pr√®s de chez moi.', rating: 5 }
          ];
        }
        const track = document.getElementById('avisTrack');
        track.innerHTML = reviews.map((r,i)=>`
          <div class="slider-item avis-item" data-index="${i}">
            <div class="card mx-auto text-center" style="width: 100%; max-width: 400px;">
              <div class="card-body">
                <div class="mb-2">${'‚òÖ'.repeat(r.rating||5)}${'‚òÜ'.repeat(5-(r.rating||5))}</div>
                <blockquote class="blockquote mb-0">
                  <p>"${(r.comment||'').replace(/"/g,'\"')}"</p>
                  <footer class="blockquote-footer mt-2">${(r.first_name||'').trim()} ${(r.last_name||'').trim()}</footer>
                </blockquote>
              </div>
            </div>
          </div>`).join('');
        if (window.sliderShow3) {
          sliderShow3('avisTrack', 'avis-item', 'avisPrevBtn', 'avisNextBtn');
        }
      } catch(e){}
    });
    </script>

    <!-- Script pour g√©rer le bouton principal selon l'√©tat de connexion -->
    <script>
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('https://api.axia.quest/api/auth/me', {
          credentials: 'include'
        });
        
        if (response.ok) {
          const data = await response.json();
          if (data.user) {
            // Utilisateur connect√© : changer le bouton en "Commander un menu"
            const mainActionBtn = document.getElementById('mainActionBtn');
            mainActionBtn.textContent = 'Commander un menu';
            mainActionBtn.href = '/menu';
            mainActionBtn.classList.remove('btn-light');
            mainActionBtn.classList.add('btn-success');
          }
        }
      } catch (error) {
        console.log('Utilisateur non connect√© ou erreur de v√©rification');
      }
    });
    </script>
  </div>
</div>