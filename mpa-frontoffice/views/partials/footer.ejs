<footer class="footer-dark text-white py-4" style="background: #181818;">
  <div class="container text-center">
    <div class="mb-2">
      <a href="/" class="footer-brand text-white fw-bold" style="text-decoration:none; font-size:1.3rem;">Drive'n Cook</a>
    </div>
    <div class="mb-2">
      <a href="/menu" class="footer-link text-white mx-2">Menu</a>
      <a href="/register" class="footer-link text-white mx-2">S'inscrire</a>
    </div>
    <div style="font-size:0.95rem; opacity:0.7;">&copy; <%= new Date().getFullYear() %> Drive'n Cook. Tous droits réservés.</div>
  </div>
  <style>
    .footer-dark { box-shadow: 0 -2px 16px rgba(0,0,0,0.12); }
    .footer-link { transition: color 0.2s; }
    .footer-link:hover { color: #27ae60 !important; text-decoration: underline; }
    .footer-brand:hover { color: #2980b9 !important; }
  </style>
</footer>

<script>
// Affichage du bouton admin si l'utilisateur est admin
(function() {
  console.log('Vérification du rôle administrateur...');
  fetch('https://api.axia.quest/api/auth/me', {
    credentials: 'include'
  })
  .then(res => {
    console.log('Réponse de l\'API:', res.status);
    return res.json();
  })
  .then(data => {
    console.log('Données utilisateur:', data);
    if (data.user && (data.user.role === 'administrateur' || data.user.role === 'ADMIN')) {
      const btn = document.createElement('img');
      btn.src = '/images/param.png';
      btn.alt = 'Accès administration';
      btn.id = 'adminParamBtn';
      btn.style.position = 'fixed';
      btn.style.bottom = '32px';
      btn.style.right = '32px';
      btn.style.width = '56px';
      btn.style.height = '56px';
      btn.style.cursor = 'pointer';
      btn.style.zIndex = '9999';
      btn.style.boxShadow = '0 4px 16px rgba(0,0,0,0.18)';
      btn.style.background = 'rgba(255,255,255,0.6)';
      btn.style.borderRadius = '50%';
      btn.style.padding = '8px';
      btn.style.transition = 'all 0.3s ease';
      
      // Ajout d'effets de survol
      btn.onmouseover = function() {
        btn.style.transform = 'rotate(45deg) scale(1.1)';
        btn.style.boxShadow = '0 6px 20px rgba(0,0,0,0.25)';
        btn.style.background = 'rgba(255,255,255,0.6)';
      };
      
      btn.onmouseout = function() {
        btn.style.transform = 'rotate(0deg) scale(1)';
        btn.style.boxShadow = '0 4px 16px rgba(0,0,0,0.18)';
        btn.style.background = 'rgba(255,255,255,0.4)';
      };

      btn.onclick = function() {
        window.location.href = 'https://admin.axia.quest/';
      };
      document.body.appendChild(btn);
      console.log('Bouton admin créé et ajouté au DOM');
    } else {
      console.log('Utilisateur non admin ou rôle:', data.user?.role);
    }
  })
  .catch(err => {
    console.error('Erreur lors de la vérification du rôle administrateur:', err);
  });
})();
</script>

